title: 设计模式总结
author: draem0507
date: 2019-04-16 00:30:33
tags:

---

> 模式是在特定环境下人们解决某类重复出现问题的一套成功或有效的解决方案；同样的，设计模式是软件工程领域上，在特定编程条件下，解决类似问题的思路。


# 设计原则

> 设计原则是在支持可维护性的同时，提高系统的可复用性。

最常见的7种面向对象设计原则如下表：

| 设计原则名称 | 定义 | 使用频率 |
| ------ | ------ | ------ |
| 单一职责原则 (SRP) | 一个对象只负责其应有职责 | ★★★★☆ |
| 开闭原则 (OCP) | 对扩展开放，对修改关闭 | ★★★★★ |
|里氏代换原则 (LSP) | 所有引用基类对象的地方能够透明地使用其子类的对象 | ★★★☆☆ |
| 依赖倒转原则 (DIP) | 抽象不应该依赖于细节，细节应该依赖于抽象| ★★★★☆ |
| 接口隔离原则 (ISP) | 使用多个专门的接口，而不使用单一的总接口 | ★★☆☆☆ |
| 迪米特法则  (LoD) | 一个软件实体应当尽可能少地与其他实体发生相互作用 | ★★★★★ |

* 接口隔离原则，也可理解成接口最小原则，指的是一个接口的功能集应该聚集；极端情况下，一个接口只定义一个方法
* 迪米特原则，也叫最小知道原则，指的是对象之间，不存在直接联系，就不需要产生关系；例如设计模式的代理模式等
* 网上还有一个第七原则，合成复用原则（CRP），指的是尽量使用对象组合，而非对象继承来实现功能复用；在设计模式中，此原则基本是所有设计模式都遵循的，尤其在装饰者、组合模型模式中尤其明显



# 设计模式
> 设计模式从大体形态上，可以分为创建型、结构型和行为型。



## 创建型
创建型包括：工厂、单例、建造者和原型；其中工厂又可细分为简单工厂、工厂方法和抽象工厂。

> 工厂模式：当我们需要获取对象，且不关心对象如何创建出来的时候，则可以使用工厂模式

分类：
* 简单工厂：一个工厂对象，根据参数，返回对应的创建对象；
* 工厂方法：当工厂对象生产对象复杂，因此将子对象的生产顺延到各个子工厂中实现，因此调用工厂方法，获得的子工厂对象，而非直接可用的对象
* 抽象工厂：生产一个对象，需要一个与之匹配的流水线，来约束各个子模块工厂；

> 单例模式：指的是当需要使用的对象，在系统中唯一的时候。

分类：
* 饿汉式：类创建时初始化
* 懒汉式：第一次调用时初始化，两把锁
* 内部类方式：可以保证延迟加载
* 枚举方式：线程安全

> 建造者：调用者可以通过组装来完成对象创建，比工厂模式更加灵活。建造者往往也会有一些默认的初始化步骤，用于简化对象的创建

举例：xx.bulidCpu().buildBoard().create()


> 原型模式：通过拷贝原型创建新的对象

举例：xx.clone();   xx.deepClone(); xx.copyProperties();


## 结构型
结构型包括：适配器模式、装饰者模式、代理模式、门面模式（外观模式）、桥梁模式、组合模式、享元模式。

> 适配器模式：借助适配器，无缝完成功能调用

> 装饰者模式：通过对象叠加的方式实现功能增强

> 代理模式：借助第三方来实现无感知访问对象

> 门面模式：一个入口，搞定所有

> 桥接模式：实现与抽象分离

> 组合模式：树模型

> 享元模式：使用共享对象可有效地支持大量的细粒度的对象


## 行为型

行为型包括：策略模式、模版模式、观察者模式、迭代器模式、责任链模式、命令模式、备忘录模式、状态模式、访问者模式、中介者模式、解释器模式。


> 策略模式：不同场景，使用不同策略应对

> 模版模式：定义规则流程，自定义实现

> 观察者模式：通知与接收消息，建立关系

> 迭代器模式：hasNext

> 责任链模式：filter after filter

> 命令模式：将命令的发起、接收和执行分开

> 备忘录模式：归档并回退

> 状态模式：不同间状态是互斥的

> 中介者模式：通过第三方解耦相互调用

> 解释器模式：定义表达式规则

# 小结

## 设计模式历练过程
* 记住简单常用的，例如单例、工厂
* 记住一些复杂点的，例如木板、建造者、代理等
* 记住一些复杂且灵活的，例如策略、桥接等
* 开始混乱，策略与状态模式的区别是什么？
* 不再使用设计模式，因为增加了类的数量和设计成本
* 再次投入设计模式，可以组合使用设计模式
* 忘记设计模式，理解设计原则，心中有剑则手中无剑

## 一些经验
* 多数设计模式，都需要一个上下文对象来实现解耦
* 先定义接口，再实现接口；最后考虑如何使用接口
* 问题不是只有一种模式可以解决，有时候可以很多种
* 忘记设计模式的差异，写出可复用、已维护的代码是关键


# 参考
* [博主在博客园的笔记](https://www.cnblogs.com/draem0507/category/587196.html)
* [Sunny 设计模式Java版](https://gof.quanke.name/)

* [CSDN 阿飞对设计原则的理解](https://blog.csdn.net/afei__/article/details/80412746)